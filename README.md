local-cdn-lab/
â”‚
â”œâ”€â”€ ğŸ“ my-origin/          <-- ğŸ“¦ ã‚ªãƒªã‚¸ãƒ³ã‚µãƒ¼ãƒãƒ¼é–¢é€£
â”‚   â”œâ”€â”€ app.py             (Python Flask ã‚µãƒ¼ãƒãƒ¼)
â”‚   â”œâ”€â”€ test.json          (é…ä¿¡ã™ã‚‹JSONãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â””â”€â”€ requirements.txt   (Flaskã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç”¨)
â”‚
â”œâ”€â”€ ğŸ“ my-cdn/              <-- ğŸš€ CDNã‚µãƒ¼ãƒãƒ¼é–¢é€£
â”‚   â””â”€â”€ nginx.conf         (Nginxè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«)
â”‚
â””â”€â”€ README.md              (æ‰‹é †ã‚’ãƒ¡ãƒ¢ã—ã¦ãŠãã¨ä¾¿åˆ©)

# ã‚ªãƒªã‚¸ãƒ³ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«ç§»å‹•
```
cd /path/to/local-cdn-lab
```
## 1. ã‚ªãƒªã‚¸ãƒ³ãƒ•ã‚©ãƒ«ãƒ€ã«ç§»å‹•
```
cd my-origin
```

## 2. å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```
pip install -r requirements.txt
```

## 3. ã‚ªãƒªã‚¸ãƒ³ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
```
python app.py
```

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«ç§»å‹•
```
cd /path/to/local-cdn-lab
```

# CDNã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
## 1. CDNãƒ•ã‚©ãƒ«ãƒ€ã«ç§»å‹•
```
cd my-cdn
```

## 2. Dockerã§Nginxã‚’èµ·å‹•
### (ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã® nginx.conf ã‚’ãƒã‚¦ãƒ³ãƒˆã™ã‚‹)
```
docker run --rm -p 8080:8080 --name my-cdn \
-v "`pwd`/nginx.conf":/etc/nginx/nginx.conf:ro \
-v "`pwd`/cache_data":/tmp/nginx_cache \
nginx
```


## 3.ã‚¢ã‚¯ã‚»ã‚¹
```
http://localhost:8080/test.json
```